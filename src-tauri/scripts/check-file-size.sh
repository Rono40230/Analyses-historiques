#!/bin/bash
MAX_LINES_SERVICES=300; MAX_LINES_COMMANDS=200; MAX_LINES_MAIN=120; EXIT_CODE=0
while IFS= read -r file; do lines=$(wc -l < "$file"); if [[ "$file" == *"/services/"* ]] && [ "$lines" -gt "$MAX_LINES_SERVICES" ]; then echo "❌ $file: $lines lignes (max $MAX_LINES_SERVICES)"; EXIT_CODE=1; elif [[ "$file" == *"/commands/"* ]] && [ "$lines" -gt "$MAX_LINES_COMMANDS" ]; then echo "❌ $file: $lines lignes (max $MAX_LINES_COMMANDS)"; EXIT_CODE=1; elif [[ "$file" == *"/main.rs" ]] && [ "$lines" -gt "$MAX_LINES_MAIN" ]; then echo "❌ $file: $lines lignes (max $MAX_LINES_MAIN)"; EXIT_CODE=1; fi; done < <(find src-tauri/src -name "*.rs" -type f); if [ $EXIT_CODE -eq 0 ]; then echo "✅ Tous les fichiers respectent les limites de taille"; fi; exit $EXIT_CODE
